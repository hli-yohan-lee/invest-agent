# AI Agent Workflow Platform - Product Requirements Document (PRD)

## 1. 제품 개요

### 1.1 제품명
AI Agent Workflow Platform (투자 분석 워크플로우 플랫폼)

### 1.2 제품 목적
플래너 모델을 기반으로 사용자의 투자 관련 요청을 분석하고, 캔버스 기반의 시각적 워크플로우 UI를 통해 실행 가능한 플로우를 구성하여 투자 분석 결과를 제공하는 플랫폼

### 1.3 타겟 사용자
- 개인 투자자
- 투자 분석가
- 금융 연구원
- 포트폴리오 매니저

### 1.4 핵심 가치 제안
- ChatGPT와 유사한 직관적인 대화형 인터페이스
- 시각적 워크플로우 편집 및 실행
- MCP(Model Context Protocol) 서버와의 연동을 통한 확장 가능한 투자 분석 도구
- 사용자 맞춤형 투자 전략 수립 및 실행

## 2. 제품 기능 요구사항

### 2.1 핵심 기능

#### 2.1.1 대화형 플래닝 시스템 (1번 탭)
**기능 설명:** 사용자 요청을 분석하고 전략을 수립하는 텍스트 기반 인터페이스

**요구사항:**
- 사용자 요청 입력 및 분석
- 플래너 모델의 전략 및 실행 계획 출력
- 실행 확인 메시지 표시 ("실행하시겠습니까?")
- 사용자의 텍스트 편집 기능
- 수락 버튼 및 Ctrl+Enter 단축키 지원

**입력 예시:**
- "PER이 높은 기업 분석해줘"
- "ESG 점수가 높은 배당주 추천해줘"
- "반도체 업종 재무제표 분석"

#### 2.1.2 시각적 워크플로우 편집기 (2번 탭)
**기능 설명:** 생성된 워크플로우를 시각적으로 표시하고 편집할 수 있는 캔버스

**요구사항:**
- 드래그 앤 드롭 방식의 노드 편집
- 실시간 플로우 미리보기
- 노드 간 연결선 표시
- 플로우 검증 및 오류 표시

**노드 구성요소:**
1. **시작 노드**
   - 검은색 원형 디자인
   - "시작" 텍스트 표시
   - 클릭 시 플로우 실행

2. **작업 박스**
   - 검은색 배경, 6px 둥근 모서리
   - 프롬프트 입력창 (흰색 배경)
   - "에이전트 툴 사용" 체크박스
   - MCP 모듈 다중 선택 드롭다운

3. **결과 박스**
   - "결과보고" 라벨
   - 출력 형식 선택 드롭다운 (테이블/보고서)

#### 2.1.3 결과 출력 및 편집 (3번 탭)
**기능 설명:** 워크플로우 실행 결과를 표시하고 편집할 수 있는 영역

**요구사항:**
- 테이블 형식 결과 표시 (읽기 전용)
- 보고서 형식 결과 표시 (편집 가능)
- 결과 데이터 내보내기 (CSV, PDF, Excel)
- 결과 히스토리 관리

### 2.2 MCP 서버 연동

#### 2.2.1 동적 모듈 로딩
**요구사항:**
- MCP 서버에서 사용 가능한 모듈 리스트 동적 로딩
- 모듈별 메타데이터 표시 (설명, 파라미터 등)
- 모듈 상태 모니터링 (온라인/오프라인)

#### 2.2.2 지원 모듈 예시
- `naver-finance-agent`: 네이버 증권 데이터 수집
- `kakao-finance-agent`: 카카오페이 증권 데이터 연동
- `custom-stock-reporter`: 커스텀 주식 리포트 생성
- `esg-analyzer`: ESG 점수 분석
- `portfolio-optimizer`: 포트폴리오 최적화

### 2.3 사용자 인터페이스

#### 2.3.1 레이아웃
- **상단:** 3개 탭 네비게이션
- **메인:** 탭별 콘텐츠 영역
- **하단:** ChatGPT 스타일 입력창 및 전송 버튼

#### 2.3.2 반응형 디자인
- 데스크톱, 태블릿, 모바일 지원
- 캔버스 영역 터치/마우스 제스처 지원

## 3. 비기능 요구사항

### 3.1 성능
- 플래너 모델 응답 시간: 5초 이내
- 워크플로우 실행 시간: 30초 이내
- 동시 사용자: 100명 이상

### 3.2 보안
- 사용자 인증 및 권한 관리
- 데이터 암호화 (전송 중, 저장 시)
- API 키 관리 및 보호

### 3.3 확장성
- 마이크로서비스 아키텍처
- 수평적 확장 가능
- MCP 모듈 플러그인 아키텍처

### 3.4 사용성
- 직관적인 사용자 인터페이스
- 상황별 도움말 제공
- 다국어 지원 (한국어, 영어)

## 4. 기술 스택

### 4.1 프론트엔드
- **프레임워크:** React 18+ / Next.js 14+
- **상태관리:** Redux Toolkit / Zustand
- **스타일링:** Tailwind CSS / Styled Components
- **캔버스:** React Flow / D3.js
- **차트:** Chart.js / Recharts

### 4.2 백엔드
- **런타임:** Node.js / Python
- **프레임워크:** Express.js / FastAPI
- **데이터베이스:** PostgreSQL / MongoDB
- **캐시:** Redis
- **메시지 큐:** RabbitMQ / Apache Kafka

### 4.3 AI/ML
- **플래너 모델:** OpenAI GPT-4 / Claude
- **MCP 프로토콜:** Model Context Protocol
- **벡터 데이터베이스:** Pinecone / Weaviate

### 4.4 인프라
- **클라우드:** AWS / Azure / GCP
- **컨테이너:** Docker / Kubernetes
- **CI/CD:** GitHub Actions / GitLab CI
- **모니터링:** Prometheus / Grafana

## 5. 사용자 시나리오

### 5.1 기본 사용 시나리오
1. 사용자가 "PER이 높은 기업 분석해줘" 입력
2. 플래너 모델이 분석 전략 수립 및 표시
3. 사용자가 실행 승인
4. 시각적 워크플로우 생성 및 표시
5. 사용자가 워크플로우 파라미터 조정
6. 워크플로우 실행
7. 결과 확인 및 보고서 편집

### 5.2 고급 사용 시나리오
1. 복합 투자 전략 수립
2. 다중 데이터 소스 연동
3. 커스텀 분석 모듈 추가
4. 배치 실행 및 스케줄링
5. 팀 협업 및 워크플로우 공유

## 6. 성공 지표 (KPI)

### 6.1 사용자 참여도
- 일간 활성 사용자 (DAU)
- 월간 활성 사용자 (MAU)
- 세션 길이 및 페이지뷰

### 6.2 제품 품질
- 워크플로우 성공률 (>95%)
- 평균 응답 시간 (<5초)
- 사용자 만족도 점수 (>4.5/5)

### 6.3 비즈니스 목표
- 사용자 유지율 (>80%)
- 프리미엄 전환율 (>15%)
- 월 수익 성장률 (>20%)

## 7. 개발 로드맵

### 7.1 Phase 1 (MVP) - 3개월
- 기본 3탭 인터페이스 구현
- 플래너 모델 연동
- 기본 MCP 모듈 (네이버, 카카오 증권)
- 단순 워크플로우 실행

### 7.2 Phase 2 (확장) - 2개월
- 고급 캔버스 편집 기능
- 추가 MCP 모듈 개발
- 사용자 인증 및 데이터 저장
- 모바일 반응형 지원

### 7.3 Phase 3 (최적화) - 2개월
- 성능 최적화
- 고급 분석 기능
- 팀 협업 기능
- API 개방 및 서드파티 연동

## 8. 위험 요소 및 대응

### 8.1 기술적 위험
- **MCP 프로토콜 안정성:** 대안 프로토콜 준비
- **AI 모델 응답 품질:** 다중 모델 지원 및 폴백 메커니즘
- **확장성 문제:** 마이크로서비스 아키텍처 적용

### 8.2 비즈니스 위험
- **경쟁사 출현:** 차별화 기능 지속 개발
- **규제 변화:** 컴플라이언스 전담 팀 구성
- **사용자 채택:** 사용성 테스트 및 피드백 반영

## 9. 결론

본 PRD는 AI Agent Workflow Platform의 핵심 기능과 요구사항을 정의합니다. 사용자 중심의 직관적인 인터페이스와 강력한 AI 기반 분석 기능을 통해 투자 분석 도메인에서 혁신적인 사용자 경험을 제공할 것입니다.
