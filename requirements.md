# AI Agent Workflow Platform - Requirements Document

## 1. 기능 요구사항 (Functional Requirements)

### 1.1 사용자 관리 요구사항

#### FR-001: 사용자 인증
- **설명**: 사용자는 이메일과 비밀번호로 로그인할 수 있어야 한다
- **우선순위**: High
- **세부사항**:
  - 이메일 형식 검증
  - 비밀번호 복잡도 요구사항 (최소 8자, 대소문자, 숫자, 특수문자 포함)
  - JWT 토큰 기반 인증
  - 자동 로그인 유지 (Remember Me)
  - 로그아웃 기능

#### FR-002: 사용자 회원가입
- **설명**: 신규 사용자는 계정을 생성할 수 있어야 한다
- **우선순위**: High
- **세부사항**:
  - 이메일 중복 검사
  - 이메일 인증 (선택사항)
  - 개인정보 처리방침 동의
  - 사용자 프로필 설정

#### FR-003: 비밀번호 관리
- **설명**: 사용자는 비밀번호를 재설정할 수 있어야 한다
- **우선순위**: Medium
- **세부사항**:
  - 비밀번호 찾기 (이메일 링크)
  - 비밀번호 변경
  - 기존 비밀번호 확인

### 1.2 플래닝 시스템 요구사항 (1번 탭)

#### FR-004: 사용자 메시지 입력
- **설명**: 사용자는 투자 관련 요청을 자연어로 입력할 수 있어야 한다
- **우선순위**: High
- **세부사항**:
  - 텍스트 입력 필드
  - 전송 버튼 (Enter 키 지원)
  - 음성 입력 (선택사항)
  - 메시지 길이 제한 (최대 2000자)
  - 실시간 타이핑 표시

#### FR-005: AI 플래너 응답
- **설명**: AI 플래너는 사용자 요청을 분석하고 투자 전략을 제안해야 한다
- **우선순위**: High
- **세부사항**:
  - GPT-4/Claude 모델 연동
  - 투자 도메인 특화 프롬프트
  - 구조화된 전략 출력
  - 실행 단계별 상세 설명
  - 예상 소요 시간 표시

#### FR-006: 대화 히스토리 관리
- **설명**: 사용자와 AI의 대화 내역이 저장되고 관리되어야 한다
- **우선순위**: Medium
- **세부사항**:
  - 대화 세션 자동 저장
  - 대화 내역 검색
  - 대화 제목 자동 생성
  - 대화 삭제 기능
  - 즐겨찾기 설정

#### FR-007: 플랜 편집 및 승인
- **설명**: 사용자는 AI가 생성한 플랜을 편집하고 실행을 승인할 수 있어야 한다
- **우선순위**: High
- **세부사항**:
  - 인라인 텍스트 편집
  - 단계별 수정 가능
  - 실행 전 최종 확인
  - 승인/거부 버튼
  - Ctrl+Enter 단축키 지원

### 1.3 워크플로우 편집기 요구사항 (2번 탭)

#### FR-008: 캔버스 기본 기능
- **설명**: 사용자는 시각적 캔버스에서 워크플로우를 편집할 수 있어야 한다
- **우선순위**: High
- **세부사항**:
  - 드래그 앤 드롭 노드 이동
  - 확대/축소 (줌 인/아웃)
  - 패닝 (캔버스 이동)
  - 미니맵 표시
  - 그리드 스냅 기능

#### FR-009: 노드 관리
- **설명**: 사용자는 워크플로우 노드를 생성, 편집, 삭제할 수 있어야 한다
- **우선순위**: High
- **세부사항**:
  - 시작 노드 (원형, 자동 생성)
  - 작업 노드 (사각형, 사용자 추가)
  - 결과 노드 (사각형, 자동 생성)
  - 노드 복사/붙여넣기
  - 노드 선택 및 다중 선택

#### FR-010: 노드 연결
- **설명**: 노드들은 논리적 흐름에 따라 연결되어야 한다
- **우선순위**: High
- **세부사항**:
  - 자동 연결선 생성
  - 연결선 스타일링
  - 순환 참조 방지
  - 연결 유효성 검사
  - 연결 삭제 기능

#### FR-011: 작업 노드 구성
- **설명**: 작업 노드는 프롬프트, 도구 설정, MCP 모듈을 포함해야 한다
- **우선순위**: High
- **세부사항**:
  - 프롬프트 입력창 (다중행 지원)
  - "에이전트 툴 사용" 체크박스
  - MCP 모듈 다중 선택 드롭다운
  - 모듈별 파라미터 설정
  - 노드 제목 편집

#### FR-012: 워크플로우 실행
- **설명**: 사용자는 완성된 워크플로우를 실행할 수 있어야 한다
- **우선순위**: High
- **세부사항**:
  - 시작 노드 클릭으로 실행
  - 실행 진행 상황 표시
  - 실시간 로그 출력
  - 실행 중단 기능
  - 오류 발생 시 상세 정보 표시

### 1.4 결과 출력 요구사항 (3번 탭)

#### FR-013: 결과 표시
- **설명**: 워크플로우 실행 결과는 테이블 또는 보고서 형태로 표시되어야 한다
- **우선순위**: High
- **세부사항**:
  - 테이블 형식 (읽기 전용)
  - 보고서 형식 (편집 가능)
  - 결과 타입 전환 기능
  - 데이터 정렬 및 필터링
  - 페이지네이션

#### FR-014: 보고서 편집
- **설명**: 사용자는 보고서 내용을 편집할 수 있어야 한다
- **우선순위**: Medium
- **세부사항**:
  - 리치 텍스트 에디터
  - 마크다운 지원
  - 이미지/차트 삽입
  - 자동 저장
  - 버전 히스토리

#### FR-015: 데이터 내보내기
- **설명**: 사용자는 결과를 다양한 형식으로 내보낼 수 있어야 한다
- **우선순위**: Medium
- **세부사항**:
  - CSV 파일 내보내기
  - Excel 파일 내보내기
  - PDF 보고서 생성
  - 이메일 공유
  - 링크 공유

#### FR-016: 결과 히스토리
- **설명**: 과거 실행 결과들이 저장되고 관리되어야 한다
- **우선순위**: Medium
- **세부사항**:
  - 실행 히스토리 목록
  - 결과 검색 기능
  - 결과 비교 기능
  - 즐겨찾기 설정
  - 자동 삭제 정책

### 1.5 MCP 서버 연동 요구사항

#### FR-017: 모듈 디스커버리
- **설명**: 시스템은 사용 가능한 MCP 모듈을 자동으로 발견해야 한다
- **우선순위**: High
- **세부사항**:
  - MCP 서버 연결 관리
  - 모듈 목록 동적 로딩
  - 모듈 메타데이터 수집
  - 모듈 상태 모니터링
  - 연결 실패 시 재시도

#### FR-018: 모듈 실행
- **설명**: 선택된 MCP 모듈이 워크플로우에서 실행되어야 한다
- **우선순위**: High
- **세부사항**:
  - 모듈별 파라미터 전달
  - 비동기 실행 지원
  - 실행 상태 추적
  - 결과 데이터 수집
  - 오류 처리 및 로깅

#### FR-019: 금융 데이터 모듈
- **설명**: 투자 분석을 위한 기본 금융 데이터 모듈들이 제공되어야 한다
- **우선순위**: High
- **세부사항**:
  - 네이버 증권 데이터 수집
  - 카카오페이 증권 데이터 연동
  - Yahoo Finance API 연동
  - 한국거래소 데이터 수집
  - 실시간 주가 정보

## 2. 비기능 요구사항 (Non-Functional Requirements)

### 2.1 성능 요구사항

#### NFR-001: 응답 시간
- **설명**: 시스템 응답 시간이 사용자 기대치를 충족해야 한다
- **측정 기준**:
  - 플래너 AI 응답: 5초 이내
  - 워크플로우 실행: 30초 이내
  - 페이지 로딩: 2초 이내
  - API 응답: 1초 이내

#### NFR-002: 처리량
- **설명**: 시스템이 충분한 동시 사용자를 처리할 수 있어야 한다
- **측정 기준**:
  - 동시 사용자: 100명 이상
  - API 호출: 1000 TPS
  - 동시 워크플로우 실행: 50개
  - 데이터베이스 연결: 200개

#### NFR-003: 리소스 사용량
- **설명**: 시스템 리소스가 효율적으로 사용되어야 한다
- **측정 기준**:
  - CPU 사용률: 평균 70% 이하
  - 메모리 사용률: 80% 이하
  - 디스크 I/O: 최적화
  - 네트워크 대역폭: 효율적 사용

### 2.2 가용성 요구사항

#### NFR-004: 시스템 가동률
- **설명**: 시스템이 안정적으로 운영되어야 한다
- **측정 기준**:
  - 가동률: 99.5% 이상
  - 계획된 다운타임: 월 4시간 이내
  - 평균 복구 시간: 15분 이내
  - 장애 감지 시간: 5분 이내

#### NFR-005: 백업 및 복구
- **설명**: 데이터 손실 방지를 위한 백업 체계가 구축되어야 한다
- **측정 기준**:
  - 일일 자동 백업
  - 복구 목표 시간: 1시간
  - 복구 목표 지점: 15분
  - 백업 데이터 보관: 30일

### 2.3 보안 요구사항

#### NFR-006: 인증 및 권한
- **설명**: 사용자 인증과 권한 관리가 안전해야 한다
- **측정 기준**:
  - JWT 토큰 기반 인증
  - 토큰 만료 시간: 24시간
  - 역할 기반 접근 제어 (RBAC)
  - 세션 관리 보안

#### NFR-007: 데이터 보안
- **설명**: 사용자 데이터가 안전하게 보호되어야 한다
- **측정 기준**:
  - 전송 중 암호화 (TLS 1.3)
  - 저장 시 암호화 (AES-256)
  - 개인정보 마스킹
  - 데이터 접근 로깅

#### NFR-008: API 보안
- **설명**: API 엔드포인트가 보안 위협으로부터 보호되어야 한다
- **측정 기준**:
  - API 키 관리
  - Rate Limiting (100 req/min)
  - CORS 설정
  - SQL Injection 방지
  - XSS 방지

### 2.4 사용성 요구사항

#### NFR-009: 사용자 인터페이스
- **설명**: 직관적이고 사용하기 쉬운 인터페이스를 제공해야 한다
- **측정 기준**:
  - 학습 시간: 30분 이내
  - 작업 완료 시간: 기존 대비 50% 단축
  - 사용자 만족도: 4.5/5 이상
  - 접근성 준수 (WCAG 2.1 AA)

#### NFR-010: 반응형 디자인
- **설명**: 다양한 디바이스에서 일관된 사용자 경험을 제공해야 한다
- **측정 기준**:
  - 데스크톱 지원 (1920x1080 이상)
  - 태블릿 지원 (768px 이상)
  - 모바일 지원 (375px 이상)
  - 터치 제스처 지원

#### NFR-011: 다국어 지원
- **설명**: 여러 언어를 지원하여 글로벌 사용자에게 서비스해야 한다
- **측정 기준**:
  - 한국어 (기본)
  - 영어
  - 일본어 (추후)
  - 중국어 (추후)

### 2.5 확장성 요구사항

#### NFR-012: 수평적 확장
- **설명**: 사용자 증가에 따라 시스템이 확장 가능해야 한다
- **측정 기준**:
  - 마이크로서비스 아키텍처
  - 컨테이너 기반 배포
  - 자동 스케일링
  - 로드 밸런싱

#### NFR-013: 모듈화
- **설명**: 새로운 기능과 모듈을 쉽게 추가할 수 있어야 한다
- **측정 기준**:
  - 플러그인 아키텍처
  - MCP 모듈 인터페이스
  - API 기반 통합
  - 독립적 배포 가능

### 2.6 호환성 요구사항

#### NFR-014: 브라우저 호환성
- **설명**: 주요 웹 브라우저에서 정상 동작해야 한다
- **측정 기준**:
  - Chrome 100+
  - Firefox 100+
  - Safari 15+
  - Edge 100+

#### NFR-015: API 호환성
- **설명**: 외부 시스템과의 호환성을 유지해야 한다
- **측정 기준**:
  - RESTful API 설계
  - OpenAPI 3.0 스펙 준수
  - GraphQL 지원 (선택사항)
  - 버전 관리 정책

## 3. 데이터 요구사항

### 3.1 데이터 모델 요구사항

#### DR-001: 사용자 데이터
- **설명**: 사용자 계정 및 프로필 정보
- **필수 필드**: id, email, password_hash, name, created_at
- **선택 필드**: phone, company, role, preferences
- **제약 조건**: 이메일 중복 불가, 개인정보 보호

#### DR-002: 대화 데이터
- **설명**: 사용자와 AI 간의 대화 세션 및 메시지
- **필수 필드**: session_id, message_id, user_id, content, type, timestamp
- **선택 필드**: metadata, attachments, reactions
- **제약 조건**: 메시지 순서 보장, 세션별 그룹화

#### DR-003: 워크플로우 데이터
- **설명**: 사용자가 생성한 워크플로우 정의
- **필수 필드**: workflow_id, user_id, name, nodes, edges, status
- **선택 필드**: description, tags, shared_with, version
- **제약 조건**: JSON 스키마 검증, 버전 관리

#### DR-004: 실행 결과 데이터
- **설명**: 워크플로우 실행 결과 및 생성된 데이터
- **필수 필드**: result_id, workflow_id, execution_id, data, timestamp
- **선택 필드**: metadata, file_urls, shared_links
- **제약 조건**: 대용량 데이터 처리, 압축 저장

### 3.2 데이터 저장 요구사항

#### DR-005: 데이터베이스 선택
- **주 데이터베이스**: PostgreSQL (관계형 데이터)
- **캐시 데이터베이스**: Redis (세션, 임시 데이터)
- **문서 데이터베이스**: MongoDB (대용량 결과 데이터, 선택사항)
- **벡터 데이터베이스**: Pinecone (AI 임베딩, 선택사항)

#### DR-006: 데이터 보존 정책
- **사용자 데이터**: 계정 삭제 시까지
- **대화 데이터**: 2년간 보존
- **워크플로우 데이터**: 영구 보존 (사용자 요청 시 삭제)
- **실행 결과**: 1년간 보존 (사용자 설정 가능)

### 3.3 데이터 마이그레이션 요구사항

#### DR-007: 스키마 변경 관리
- **설명**: 데이터베이스 스키마 변경이 안전하게 관리되어야 한다
- **요구사항**:
  - 마이그레이션 스크립트 버전 관리
  - 롤백 가능한 마이그레이션
  - 무중단 마이그레이션
  - 마이그레이션 테스트 자동화

## 4. 시스템 요구사항

### 4.1 하드웨어 요구사항

#### SR-001: 서버 하드웨어
- **프로덕션 환경**:
  - CPU: 8 core 이상
  - RAM: 32GB 이상
  - 스토리지: 1TB SSD
  - 네트워크: 1Gbps 이상
- **개발 환경**:
  - CPU: 4 core 이상
  - RAM: 16GB 이상
  - 스토리지: 256GB SSD

#### SR-002: 클라이언트 하드웨어
- **최소 요구사항**:
  - CPU: 2 core 이상
  - RAM: 4GB 이상
  - 네트워크: 10Mbps 이상
- **권장 요구사항**:
  - CPU: 4 core 이상
  - RAM: 8GB 이상
  - 네트워크: 50Mbps 이상

### 4.2 소프트웨어 요구사항

#### SR-003: 런타임 환경
- **프론트엔드**: Node.js 18+, Next.js 14+
- **백엔드**: Node.js 18+ 또는 Python 3.9+
- **데이터베이스**: PostgreSQL 14+, Redis 7+
- **웹서버**: Nginx 1.20+

#### SR-004: 개발 도구
- **버전 관리**: Git 2.30+
- **패키지 관리**: npm 9+ 또는 pnpm 8+
- **컨테이너**: Docker 20.10+, Kubernetes 1.25+
- **모니터링**: Prometheus, Grafana

### 4.3 네트워크 요구사항

#### SR-005: 네트워크 설정
- **프로토콜**: HTTPS, WebSocket
- **포트**: 80 (HTTP), 443 (HTTPS), 3000 (개발)
- **방화벽**: 필요한 포트만 개방
- **CDN**: 정적 자원 배포 (선택사항)

## 5. 규정 준수 요구사항

### 5.1 개인정보 보호

#### CR-001: 개인정보보호법 준수
- **적용 법률**: 개인정보보호법, GDPR (EU 사용자)
- **요구사항**:
  - 개인정보 처리방침 명시
  - 사용자 동의 확보
  - 개인정보 접근/수정/삭제 권리 보장
  - 개인정보 처리 로그 관리

#### CR-002: 금융 데이터 규제
- **적용 규제**: 자본시장법, 금융정보보호 가이드라인
- **요구사항**:
  - 금융 데이터 사용 목적 명시
  - 투자 권유 면책 조항
  - 데이터 정확성 고지
  - 리스크 경고 표시

### 5.2 접근성 준수

#### CR-003: 웹 접근성
- **적용 표준**: WCAG 2.1 AA 수준
- **요구사항**:
  - 키보드 네비게이션 지원
  - 스크린 리더 호환성
  - 색상 대비 기준 준수
  - 대체 텍스트 제공

## 6. 검증 기준 (Acceptance Criteria)

### 6.1 기능 검증

#### AC-001: 사용자 시나리오 검증
- 신규 사용자 회원가입부터 첫 번째 워크플로우 실행까지 20분 이내 완료
- 기존 사용자 로그인부터 분석 결과 확인까지 5분 이내 완료
- 복잡한 워크플로우 (5개 이상 노드) 정상 실행
- 동시 10명 사용자 테스트 통과

#### AC-002: 성능 검증
- 부하 테스트: 100명 동시 사용자에서 응답 시간 기준 충족
- 스트레스 테스트: 시스템 한계치 확인 및 안정성 검증
- 보안 테스트: 취약점 스캔 및 침투 테스트 통과
- 호환성 테스트: 주요 브라우저에서 기능 정상 동작

### 6.2 사용성 검증

#### AC-003: 사용자 테스트
- 5명 이상의 실제 사용자 대상 사용성 테스트
- 평균 학습 시간 30분 이내
- 사용자 만족도 4.0/5.0 이상
- 주요 기능 접근성 테스트 통과

## 7. 제약사항

### 7.1 기술적 제약사항

#### C-001: 플랫폼 제약
- 웹 기반 애플리케이션으로 제한
- 모바일 앱은 추후 고려
- 오프라인 사용 불가
- 브라우저 호환성 범위 제한

#### C-002: 통합 제약
- MCP 프로토콜 표준 준수 필요
- 외부 API 의존성 (데이터 제공업체)
- AI 모델 API 사용량 제한
- 실시간 데이터 비용 고려

### 7.2 비즈니스 제약사항

#### C-003: 예산 및 일정
- 개발 예산: 제한적
- 개발 기간: 7개월 (MVP 3개월)
- 팀 규모: 5-8명
- 외부 의존성 최소화

#### C-004: 법적 제약
- 금융 투자 권유 업무 제한
- 개인정보보호법 완전 준수
- 저작권 있는 데이터 사용 제한
- 국가별 규제 차이 고려

## 8. 가정사항

### 8.1 기술적 가정

#### A-001: 외부 서비스
- OpenAI/Claude API 안정적 제공
- MCP 서버 정상 운영
- 외부 금융 데이터 API 지속 제공
- 클라우드 서비스 안정성

#### A-002: 사용자 환경
- 사용자는 안정적인 인터넷 연결 보유
- 모던 브라우저 사용
- 기본적인 컴퓨터 사용 능력 보유
- 투자에 대한 기초 지식 보유

### 8.2 비즈니스 가정

#### A-003: 시장 환경
- 개인 투자자 증가 추세 지속
- AI 기반 투자 도구 수요 증가
- 경쟁사 기술 수준 유지
- 규제 환경 급격한 변화 없음

이 요구사항 문서는 프로젝트 진행 중 지속적으로 업데이트되며, 모든 이해관계자의 검토와 승인을 거쳐 확정됩니다.
